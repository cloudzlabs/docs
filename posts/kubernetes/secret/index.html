<!DOCTYPE html>
<html lang='ko' class='svgfilters csscalc cssgradients preserve3d supports svgclippaths svgasimg no-touchevents cssanimations boxsizing csstransforms csstransforms3d csstransitions svg'>

    <head>

    <meta charset='utf-8'>
<meta name='keywords' content='CLOUDZ LABS, DIGITAL LABS'>
<meta name='author' content='CLOUDZ LABS, DIGITAL LABS'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no'>
<meta name='description' content='지난 챕터의 ConfigMap에 이어서 이번에는 Secret Object를 보도록 하겠습니다.
Secret 이란? Secret은 비밀번호나 OAuth 토큰값 또는 ssh key 등의 민감한 정보를 유지하기 위해 사용됩니다. 이러한 정보를 Docker 이미지나 Pod에 그대로 정의하기 보다 Secret을 활용하면 더욱 안전하고 유동적으로 사용할 수 있습니다.
Secret 적용하기 Secret 생성 명령어를 통해 생성하기 아래와 같이 kubectl create secret 명령어를 통해 Secret을 생성합니다.
Window OS의 경우 아래 yaml 파일로 Secret을 직접 생성하는 방식으로 사용하세요.
$ kubectl create secret generic db-user-pass --from-literal=user=admin --from-literal=password=1f2d1e2e67df secret &#34;db-user-pass&#34; created 아래와 같이 kubectl get 명령어와 kuberctl describe 명령어를 통해 생성된 Secret을 확인합니다.'>

<meta name="google-site-verification" content="vMW654gdULy3JNwnOIbbAqHdH3cQKdKH0ocV8OxP5cM" />

<meta property='og:title' content='[Kubernetes 활용(7/8)] Secret | 김빛나'>
<meta property='og:description' content='지난 챕터의 ConfigMap에 이어서 이번에는 Secret Object를 보도록 하겠습니다.
Secret 이란? Secret은 비밀번호나 OAuth 토큰값 또는 ssh key 등의 민감한 정보를 유지하기 위해 사용됩니다. 이러한 정보를 Docker 이미지나 Pod에 그대로 정의하기 보다 Secret을 활용하면 더욱 안전하고 유동적으로 사용할 수 있습니다.
Secret 적용하기 Secret 생성 명령어를 통해 생성하기 아래와 같이 kubectl create secret 명령어를 통해 Secret을 생성합니다.
Window OS의 경우 아래 yaml 파일로 Secret을 직접 생성하는 방식으로 사용하세요.
$ kubectl create secret generic db-user-pass --from-literal=user=admin --from-literal=password=1f2d1e2e67df secret &#34;db-user-pass&#34; created 아래와 같이 kubectl get 명령어와 kuberctl describe 명령어를 통해 생성된 Secret을 확인합니다.'>
<meta property='og:url' content='http://tech.cloudz-labs.io/posts/kubernetes/secret/'>
<meta property='og:site_name' content='DIGITAL LABS'>
<meta property='og:type' content='article'><meta property='og:image' content='/images/default.png'><meta property='article:section' content='Posts'><meta property='article:tag' content='kubernetes'><meta property='article:tag' content='container'><meta property='article:tag' content='container orchestration'><meta property='article:tag' content='k8s'><meta property='article:tag' content='secret'><meta property='article:published_time' content='2018-05-11T13:55:54&#43;09:00'/><meta property='article:modified_time' content='2018-05-11T13:55:54&#43;09:00'/><meta name='twitter:card' content='summary'>

<meta name="generator" content="Hugo 0.53-DEV" />


    <title>[Kubernetes 활용(7/8)] Secret | 김빛나</title>

    <link rel='canonical' href='http://tech.cloudz-labs.io/posts/kubernetes/secret/'>

    

    <link rel='icon' href='/favicon-blank.ico'>


<link rel='apple-touch-icon' href='touch-icon-iphone.png'>
<link rel='apple-touch-icon' sizes='152x152' href='touch-icon-ipad.png'>
<link rel='apple-touch-icon' sizes='180x180' href='touch-icon-iphone-retina.png'>
<link rel='apple-touch-icon' sizes='167x167' href='touch-icon-ipad-retina.png'>


<link href="https://fonts.googleapis.com/css?family=Noto+Sans" rel="stylesheet">

<link rel='stylesheet' href='/assets/css/main.f0e8df71.css'>

<link rel='stylesheet' href='/assets/css/bootstrap.css'><link rel='stylesheet' href='/assets/css/common.css'><link rel='stylesheet' href='/assets/css/font-awesome.css'><link rel='stylesheet' href='/assets/css/markdown.css'><link rel='stylesheet' href='/assets/css/mermaid.css'><style type="text/css">
:root #header + #content > #left > #rlblock_left{
    display:none !important;
}:not(pre) > code + span.copy-to-clipboard {
        display: none;
    }</style>

<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-115004569-1', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>

</head>


    <body naver_screen_capture_injected="true" class="hasScrollbar">

        
<div class="offcanvas-container" id="mobile-menu">
    <nav class="offcanvas-menu">
        <ul class="menu">
            <li class='has-children'>
                <span>
                    <a href='http://dtlabs.skcc.com/?utm_source=tech_blog&amp;utm_campaign=blog_about_us&amp;utm_content=menulink'>
                        <span>About Us</span>
                    </a>
                </span>
            </li>
            <li class='has-children'>
                <span>
                    <a href='/posts/'>
                        <span>Posts</span>
                    </a>
                </span>
            </li>
            
        </ul>
    </nav>
</div>
<div class="site-backdrop"></div>


<header class="navbar navbar-sticky">

    <div class="site-search" method="get">
    <input data-search-input id="search-by" type="text" name="site_search" placeholder="검색어를 3글자 이상 입력하세요.">
    <div class="search-tools">
        <span class="clear-search">Clear</span>
        <span class="close-search">
            <i class="icon-cross"></i>
        </span>
    </div>
</div>
<div class="site-branding">
    <div class="inner">
        <a class="offcanvas-toggle menu-toggle" href="#mobile-menu" data-toggle="offcanvas"></a>
        <a class="site-logo" href="http://tech.cloudz-labs.io/">Digital Labs Tech</a>
    </div>
</div>
<nav class='site-menu'>
    <ul>
        <li >
            <a href='http://dtlabs.skcc.com/?utm_source=tech_blog&amp;utm_campaign=blog_about_us&amp;utm_content=menulink'>
                <span>About Us</span>
            </a>
        </li>
        <li >
            <a href='/posts/'>
                <span>Posts</span>
            </a>
        </li>
        
    </ul>
</nav>

<div class="toolbar">
    <div class="tools">
        <div class="search">
            <i class="fa fa-search" aria-hidden="true"></i>
        </div>
    </div>
</div>


</header>



        

<div class="offcanvas-wrapper page-body">
    <div class="container">
        <div class="row justify-content-center">
            <div class="col-lg-10">
                <div class="row col-lg-12"><ul class="cover-byline">
    <li>
        <i class="fa fa-calendar" aria-hidden="true"></i>May 11, 2018
    </li>
    
    <li>
        <i class="fa fa-clock-o" aria-hidden="true"></i>
전체 읽기 4분 소요

    </li>
    
</ul>
</div>

                <div class="page-con"><h2>[Kubernetes 활용(7/8)] Secret</h2>
<p class="post-authorName">

    by&nbsp;<a href="/authors/blingeeeee">김빛나</a></p>


<p>지난 챕터의 ConfigMap에 이어서 이번에는 Secret Object를 보도록 하겠습니다.</p>

<h2 id="secret-이란">Secret 이란?</h2>

<hr />

<p>Secret은 비밀번호나 OAuth 토큰값 또는 ssh key 등의 민감한 정보를
유지하기 위해 사용됩니다.<br/>
이러한 정보를 Docker 이미지나 Pod에 그대로 정의하기 보다 Secret을
활용하면 더욱 안전하고 유동적으로 사용할 수 있습니다.</p>

<h2 id="secret-적용하기">Secret 적용하기</h2>

<hr />

<h3 id="secret-생성">Secret 생성</h3>

<h4 id="명령어를-통해-생성하기">명령어를 통해 생성하기</h4>

<p>아래와 같이 <code>kubectl create secret</code> 명령어를 통해 Secret을
생성합니다.</p>

<p>Window OS의 경우 아래 yaml 파일로 Secret을 직접 생성하는 방식으로
사용하세요.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ kubectl create secret generic db-user-pass --from-literal<span style="color:#f92672">=</span>user<span style="color:#f92672">=</span>admin --from-literal<span style="color:#f92672">=</span>password<span style="color:#f92672">=</span>1f2d1e2e67df
secret <span style="color:#e6db74">&#34;db-user-pass&#34;</span> created</code></pre></div>
<p>아래와 같이 <code>kubectl get</code> 명령어와 <code>kuberctl describe</code>
명령어를 통해 생성된 Secret을 확인합니다.</p>

<p>이 명령어들로는 Secret 데이터를 볼 수 없으며 이는 Secret이 노출되지
않도록 보호하기 위함입니다.</p>

<p>데이터를 보려면 아래 <strong>Sercret 디코딩</strong> 을 참고하세요.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ kubectl get secrets
NAME                  TYPE                                  DATA      AGE
db-user-pass          Opaque                                <span style="color:#ae81ff">2</span>         25s

$ kubectl describe secrets/db-user-pass
Name:         db-user-pass
Namespace:    default
Labels:       &lt;none&gt;
Annotations:  &lt;none&gt;

Type:  Opaque

Data
<span style="color:#f92672">====</span>
password:  <span style="color:#ae81ff">12</span> bytes
user:      <span style="color:#ae81ff">5</span> bytes</code></pre></div>
<h4 id="yaml-파일을-통해-생성하기">yaml 파일을 통해 생성하기</h4>

<p>yaml 형식의 파일을 만들고 <code>kubectl create</code> 명령어를 통해 Secret 을
생성합니다. 각 항목은 base64로 인코딩 되어야 합니다.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ echo -n <span style="color:#e6db74">&#34;admin&#34;</span> | base64
YWRtaW4<span style="color:#f92672">=</span>

$ echo -n <span style="color:#e6db74">&#34;1f2d1e2e67df&#34;</span> | base64
MWYyZDFlMmU2N2Rm</code></pre></div>
<p><strong>secret.yaml</strong></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yml" data-lang="yml">apiVersion: v1
kind: Secret
metadata:
  name: mysecret
type: Opaque
data:
  username: YWRtaW4=
  password: MWYyZDFlMmU2N2Rm</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ kubectl apply -f secret.yaml
secret <span style="color:#e6db74">&#34;mysecret&#34;</span> created</code></pre></div>
<h4 id="secret-디코딩">Secret 디코딩</h4>

<p>Secret에 작성된 실제 데이터를 확인하려면 <code>kubectl get secret</code>
명령어를 통해 인코딩 된 데이터를 확인합니다.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ kubectl get secret mysecret -o yaml
apiVersion: v1
data:
  password: MWYyZDFlMmU2N2Rm
  username: YWRtaW4<span style="color:#f92672">=</span>
kind: Secret
metadata:
  creationTimestamp: <span style="color:#ae81ff">2017</span>-12-11T06:31:37Z
  name: mysecret
  namespace: default
  resourceVersion: <span style="color:#e6db74">&#34;76497&#34;</span>
  selfLink: /api/v1/namespaces/default/secrets/mysecret
  uid: f0f1b4f5-de3c-11e7-a37c-08002780475f
type: Opaque</code></pre></div>
<p>인코딩 되어 있는 password 값을 디코드하여 실제 데이터를 확인합니다.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ echo <span style="color:#e6db74">&#34;MWYyZDFlMmU2N2Rm&#34;</span> | base64 --decode
1f2d1e2e67df</code></pre></div>
<h3 id="secret-사용">Secret 사용</h3>

<h4 id="secret을-pod에서-환경변수로-사용">Secret을 Pod에서 환경변수로 사용</h4>

<p>아래와 같이 Secret을 사용할 Pod의 spec에  env를 개별적으로 정의합니다.</p>

<p><strong>env[].valueFrom.secretKeyRef</strong> 에 Secret의 이름과 key를 채워 환경 변수를 정의합니다.</p>

<p><strong>gs-spring-boot-docker-deployment.yaml</strong></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yml" data-lang="yml">apiVersion: apps/v1beta2
kind: Deployment
metadata:
  name: gs-spring-boot-docker-deployment
  labels:
    app: gs-spring-boot-docker
spec:
  replicas: <span style="color:#ae81ff">1</span>
  selector:
    matchLabels:
      app: gs-spring-boot-docker
  template:
    metadata:
      labels:
        app: gs-spring-boot-docker
    spec:
      containers:
      - name: gs-spring-boot-docker
        image: dtlabs/gs-spring-boot-docker:<span style="color:#ae81ff">1.0</span>
        ports:
        - containerPort: <span style="color:#ae81ff">8080</span>
        env:
        - name: SECRET_USERNAME
          valueFrom:
            secretKeyRef:
              name: mysecret
              key: username
        - name: SECRET_PASSWORD
          valueFrom:
            secretKeyRef:
              name: mysecret
              key: password
      restartPolicy: Always</code></pre></div>
<p>이렇게 설정한 뒤 Deployment를 배포합니다.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">kubectl apply -f gs-spring-boot-docker-deployment.yaml</code></pre></div>
<p>Pod의 컨테이너 내부에서는 Secret key 값이 base64 디코드된 값의 정상
환경변수로 나타납니다.</p>

<p> 배포된 Pod에 접속하여  환경변수가 잘 적용되었는지 확인합니다.</p>

<p>아래와 같이 컨테이너 접속 후 env 명령어를 통해 Secret 정보인 환경
변수(SECRET_USERNAME, SECRET_PASSWORD)가 제대로 적용되었음을
확인합니다.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ kubectl get pod
NAME                                                READY     STATUS    RESTARTS   AGE
gs-spring-boot-docker-deployment-5d7db89759-xvm5t   <span style="color:#ae81ff">1</span>/1       Running   <span style="color:#ae81ff">0</span>          1m

$ kubectl exec -it gs-spring-boot-docker-deployment-5d7db89759-xvm5t sh
/ <span style="color:#75715e"># env</span>
KUBERNETES_PORT<span style="color:#f92672">=</span>tcp://10.96.0.1:443
KUBERNETES_SERVICE_PORT<span style="color:#f92672">=</span><span style="color:#ae81ff">443</span>
JAVA_ALPINE_VERSION<span style="color:#f92672">=</span><span style="color:#ae81ff">8</span>.131.11-r2
HOSTNAME<span style="color:#f92672">=</span>gs-spring-boot-docker-deployment-5d7db89759-xvm5t
SHLVL<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span>
HOME<span style="color:#f92672">=</span>/root
SECRET_PASSWORD<span style="color:#f92672">=</span>1f2d1e2e67df
JAVA_VERSION<span style="color:#f92672">=</span>8u131
TERM<span style="color:#f92672">=</span>xterm
KUBERNETES_PORT_443_TCP_ADDR<span style="color:#f92672">=</span><span style="color:#ae81ff">10</span>.96.0.1
PATH<span style="color:#f92672">=</span>/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/lib/jvm/java-1.8-openjdk/jre/bin:/usr/lib/jvm/java-1.8-openjdk/bin
KUBERNETES_PORT_443_TCP_PORT<span style="color:#f92672">=</span><span style="color:#ae81ff">443</span>
JAVA_OPTS<span style="color:#f92672">=</span>
KUBERNETES_PORT_443_TCP_PROTO<span style="color:#f92672">=</span>tcp
LANG<span style="color:#f92672">=</span>C.UTF-8
SECRET_USERNAME<span style="color:#f92672">=</span>admin
KUBERNETES_PORT_443_TCP<span style="color:#f92672">=</span>tcp://10.96.0.1:443
KUBERNETES_SERVICE_PORT_HTTPS<span style="color:#f92672">=</span><span style="color:#ae81ff">443</span>
PWD<span style="color:#f92672">=</span>/
JAVA_HOME<span style="color:#f92672">=</span>/usr/lib/jvm/java-1.8-openjdk
KUBERNETES_SERVICE_HOST<span style="color:#f92672">=</span><span style="color:#ae81ff">10</span>.96.0.1</code></pre></div>
<h3 id="secret-관리">Secret 관리</h3>

<h4 id="secret-생성-1">Secret  생성</h4>

<p><code>kubectl create secret</code> 명령어 또는 yaml 파일을 통해 생성합니다.</p>

<p>자세한 내용은 위의 활용 부분을 참고하세요.</p>

<h4 id="secret-수정">Secret 수정</h4>

<h5 id="secret-수정-1">Secret 수정</h5>

<p><code>kubectl edit secret</code> 명령어를 통해 수정합니다.</p>

<p>수정할 데이터는 base64로 인코딩 된 값이어야 하며 예제에서는 user 값을
변경해 봅시다.</p>

<p>Window OS의 경우 해당 명령어로 수정이 불가합니다. 아래 파일을 직접
수정하는 방식으로 사용하세요.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ echo -n <span style="color:#e6db74">&#34;test&#34;</span> | base64
dGVzdA<span style="color:#f92672">==</span>
$ kubectl edit secret db-user-pass 
secret <span style="color:#e6db74">&#34;db-user-pass&#34;</span> edited
$ kubectl get secret db-user-pass -o yaml
apiVersion: v1
data:
  password: MWYyZDFlMmU2N2Rm
  user: dGVzdA<span style="color:#f92672">==</span>
kind: Secret
metadata:
  creationTimestamp: <span style="color:#ae81ff">2017</span>-12-11T06:16:25Z
  name: db-user-pass
  namespace: default
  resourceVersion: <span style="color:#e6db74">&#34;85279&#34;</span>
  selfLink: /api/v1/namespaces/default/secrets/db-user-pass
  uid: d0eb0495-de3a-11e7-a37c-08002780475f
type: Opaque</code></pre></div>
<p>또는 Secret yaml 파일을 직접 수정한 뒤 적용합니다. 예제에서는 mysecret의
username 값을 변경한 뒤 </p>

<p><strong>secret.yaml</strong></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yml" data-lang="yml">apiVersion: v1
kind: Secret
metadata:
  name: mysecret
type: Opaque
data:
  username: dGVzdA==
  password: MWYyZDFlMmU2N2Rm</code></pre></div>
<p>아래 명령어 <code>kubectl apply</code>를 통해 적용하고 확인합니다.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ kubectl apply -f secret.yaml
Warning: kubectl apply should be used on resource created by either kubectl create --save-config or kubectl apply
secret <span style="color:#e6db74">&#34;mysecret&#34;</span> configured


$ kubectl get secret mysecret -o yaml
apiVersion: v1
data:
  password: MWYyZDFlMmU2N2Rm
  username: dGVzdA<span style="color:#f92672">==</span>
kind: Secret
metadata:
  annotations:
    kubectl.kubernetes.io/last-applied-configuration: |
      <span style="color:#f92672">{</span><span style="color:#e6db74">&#34;apiVersion&#34;</span>:<span style="color:#e6db74">&#34;v1&#34;</span>,<span style="color:#e6db74">&#34;data&#34;</span>:<span style="color:#f92672">{</span><span style="color:#e6db74">&#34;password&#34;</span>:<span style="color:#e6db74">&#34;MWYyZDFlMmU2N2Rm&#34;</span>,<span style="color:#e6db74">&#34;username&#34;</span>:<span style="color:#e6db74">&#34;dGVzdA==&#34;</span><span style="color:#f92672">}</span>,<span style="color:#e6db74">&#34;kind&#34;</span>:<span style="color:#e6db74">&#34;Secret&#34;</span>,<span style="color:#e6db74">&#34;metadata&#34;</span>:<span style="color:#f92672">{</span><span style="color:#e6db74">&#34;annotations&#34;</span>:<span style="color:#f92672">{}</span>,<span style="color:#e6db74">&#34;name&#34;</span>:<span style="color:#e6db74">&#34;mysecret&#34;</span>,<span style="color:#e6db74">&#34;namespace&#34;</span>:<span style="color:#e6db74">&#34;default&#34;</span><span style="color:#f92672">}</span>,<span style="color:#e6db74">&#34;type&#34;</span>:<span style="color:#e6db74">&#34;Opaque&#34;</span><span style="color:#f92672">}</span>
  creationTimestamp: <span style="color:#ae81ff">2017</span>-12-11T06:31:37Z
  name: mysecret
  namespace: default
  resourceVersion: <span style="color:#e6db74">&#34;86747&#34;</span>
  selfLink: /api/v1/namespaces/default/secrets/mysecret
  uid: f0f1b4f5-de3c-11e7-a37c-08002780475f
type: Opaque</code></pre></div>
<h5 id="수정된-secret을-pod에-적용">수정된 Secret을 Pod에 적용</h5>

<p>Secret을 수정한 뒤에 Pod에 적용하기 위해서 Pod를 재생성해야 합니다.</p>

<p><code>kubectl replace --force -f</code> 명령어를 통해 Pod를
재생성합니다. <strong><em>-l</em></strong> 옵션은 스케일링된 Pod일 경우 동일한 라벨을 가지고
스케일링 되므로 해당 라벨을 가진 모든 Pod에 적용하기 위한 설정입니다.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ kubectl get pod -l app<span style="color:#f92672">=</span>gs-spring-boot-docker -o yaml | kubectl replace --force -f -
pod <span style="color:#e6db74">&#34;gs-spring-boot-docker-deployment-5d7db89759-xvm5t&#34;</span> deleted
pod <span style="color:#e6db74">&#34;gs-spring-boot-docker-deployment-5d7db89759-xvm5t&#34;</span> replaced</code></pre></div>
<p>새로 생성된 Pod에 변경된 Secret이 제대로 적용되었는지 확인합니다. 
컨테이너에 접속하여 env 명령어를 통해 환경변수(SECRET_USERNAME) 값이
test로 제대로 변경되었는지 확인합니다.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ kubectl get pod
NAME                                                READY     STATUS    RESTARTS   AGE
gs-spring-boot-docker-deployment-5d7db89759-hn5q8   <span style="color:#ae81ff">1</span>/1       Running   <span style="color:#ae81ff">0</span>          1m
$ kubectl exec -it gs-spring-boot-docker-deployment-5d7db89759-hn5q8 sh
/ <span style="color:#75715e"># env</span>
KUBERNETES_PORT<span style="color:#f92672">=</span>tcp://10.96.0.1:443
KUBERNETES_SERVICE_PORT<span style="color:#f92672">=</span><span style="color:#ae81ff">443</span>
JAVA_ALPINE_VERSION<span style="color:#f92672">=</span><span style="color:#ae81ff">8</span>.131.11-r2
HOSTNAME<span style="color:#f92672">=</span>gs-spring-boot-docker-deployment-5d7db89759-hn5q8
SHLVL<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span>
HOME<span style="color:#f92672">=</span>/root
SECRET_PASSWORD<span style="color:#f92672">=</span>1f2d1e2e67df
JAVA_VERSION<span style="color:#f92672">=</span>8u131
TERM<span style="color:#f92672">=</span>xterm
KUBERNETES_PORT_443_TCP_ADDR<span style="color:#f92672">=</span><span style="color:#ae81ff">10</span>.96.0.1
PATH<span style="color:#f92672">=</span>/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/lib/jvm/java-1.8-openjdk/jre/bin:/usr/lib/jvm/java-1.8-openjdk/bin
KUBERNETES_PORT_443_TCP_PORT<span style="color:#f92672">=</span><span style="color:#ae81ff">443</span>
JAVA_OPTS<span style="color:#f92672">=</span>
KUBERNETES_PORT_443_TCP_PROTO<span style="color:#f92672">=</span>tcp
LANG<span style="color:#f92672">=</span>C.UTF-8
SECRET_USERNAME<span style="color:#f92672">=</span>test
KUBERNETES_PORT_443_TCP<span style="color:#f92672">=</span>tcp://10.96.0.1:443
KUBERNETES_SERVICE_PORT_HTTPS<span style="color:#f92672">=</span><span style="color:#ae81ff">443</span>
PWD<span style="color:#f92672">=</span>/
JAVA_HOME<span style="color:#f92672">=</span>/usr/lib/jvm/java-1.8-openjdk
KUBERNETES_SERVICE_HOST<span style="color:#f92672">=</span><span style="color:#ae81ff">10</span>.96.0.1</code></pre></div>
<h4 id="secret-삭제">Secret 삭제</h4>

<p><code>kubectl delete</code> 명령어를 통해 yaml 파일을 통해 생성했던
mysecret을 삭제합니다.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$  kubectl delete -f secret.yaml
secret <span style="color:#e6db74">&#34;mysecret&#34;</span> deleted</code></pre></div>
<p><code>kubectl get secret</code> 명령어를 통해 secret 목록을 확인합니다.
mysecret이 제대로 삭제되었는지 확인해봅니다.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ kubectl get secret
NAME                  TYPE                                  DATA      AGE
db-user-pass          Opaque                                <span style="color:#ae81ff">2</span>         4h</code></pre></div>

<div class="series">
    <h3>함께 보기</h3>
    <ul>
        
        <li><a href="/posts/kubernetes/configmap/">[Kubernetes 활용(6/8)] ConfigMap</a></li>
        
        <li><a href="/posts/kubernetes/ingress/">[Kubernetes 활용(5/8)] Ingress</a></li>
        
        <li><a href="/posts/kubernetes/backingservice/">[Kubernetes 활용(4/8)] Mysql DB 연동하기</a></li>
        
        <li><a href="/posts/kubernetes/hpa/">[Kubernetes 활용(3/8)] HPA(오토스케일링)</a></li>
        
        <li><a href="/posts/kubernetes/rolling-update/">[Kubernetes 활용(2/8)] Rolling Update(무중단 배포)</a></li>
        
    </ul>
</div>

<div class="single-post-footer">

                        <ul class="tag"><li><a href="/tags/kubernetes" rel="tag">kubernetes</a></li><li><a href="/tags/container" rel="tag">container</a></li><li><a href="/tags/container-orchestration" rel="tag">container orchestration</a></li><li><a href="/tags/k8s" rel="tag">k8s</a></li><li><a href="/tags/secret" rel="tag">secret</a></li></ul>
<div class="share">
    <ul class="sns center">
        
        
        
        <li>
            <a class="social-button" href="//plus.google.com/share?url=http%3a%2f%2ftech.cloudz-labs.io%2fposts%2fkubernetes%2fsecret%2f" target="_blank" rel="noopener">
                <i class="fa fa-google-plus" aria-hidden="true"></i>
            </a>
        </li>
        

        
        
        <li>
            <a class="social-button" href="//twitter.com/share?url=http%3a%2f%2ftech.cloudz-labs.io%2fposts%2fkubernetes%2fsecret%2f&amp;text=%5bKubernetes%20%ed%99%9c%ec%9a%a9%287%2f8%29%5d%20Secret" target="_blank" rel="noopener">
                <i class="fa fa-twitter" aria-hidden="true"></i>
            </a>
        </li>
        

        
        
        <li>
            <a class="social-button" href="//www.facebook.com/sharer/sharer.php?u=http%3a%2f%2ftech.cloudz-labs.io%2fposts%2fkubernetes%2fsecret%2f" target="_blank" rel="noopener">
                <i class="fa fa-facebook" aria-hidden="true"></i>
            </a>
        </li>
        

        
        
        <li>
            <a class="social-button" href="//www.linkedin.com/shareArticle?url=http%3a%2f%2ftech.cloudz-labs.io%2fposts%2fkubernetes%2fsecret%2f&amp;title=%5bKubernetes%20%ed%99%9c%ec%9a%a9%287%2f8%29%5d%20Secret" target="_blank" rel="noopener">
                <i class="fa fa-linkedin" aria-hidden="true"></i>
            </a>
        </li>
        

        
        
        <li>
            <a class="social-button" href="//www.pinterest.com/pin/create/button/?url=http%3a%2f%2ftech.cloudz-labs.io%2fposts%2fkubernetes%2fsecret%2f&amp;description=%5bKubernetes%20%ed%99%9c%ec%9a%a9%287%2f8%29%5d%20Secret" target="_blank" rel="noopener">
                <i class="fa fa-pinterest-p" aria-hidden="true"></i>
            </a>
        </li>
        

        
        
        <li>
            <a class="social-button" href="mailto:?subject=Check out this post by &amp;body=http%3a%2f%2ftech.cloudz-labs.io%2fposts%2fkubernetes%2fsecret%2f" target="_blank" rel="noopener">
                <i class="fa fa-envelope" aria-hidden="true"></i>
            </a>
        </li>
        
        
    </ul>
</div>
<div class="foot-author row">
                            <div class="col-lg-6 col-md-6 col-sm-12 ">
                                <div class="author">
                                    <a href="/authors/blingeeeee">

                                        <img class="img-circle" alt="" src='http://tech.cloudz-labs.io//images/authors/blingeeeee.png'/><div class="author-info">
    <h3>김빛나</h3>
    <p>Microservice Architecture Design</p>
</div>


                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>
<section class="mt-30">

    <div id="disqus_thread"></div>
<script type="application/javascript">
    var disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "digital-labs" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>

</section>
</div>

                <div class="mt-30 row"><div class="col-md-6 post-pre"><a href='/posts/kubernetes/configmap/'>
            <div class="author">
                <div class="author-info">이전&nbsp;페이지
                    <h2 class="post-title">[Kubernetes 활용(6/8)] ConfigMap</h2>
                    <ul class="cover-byline"><li><i class="fa fa-calendar" aria-hidden="true"></i>2018, May 11
                        <li><i class="fa fa-clock-o" aria-hidden="true"></i>
                        전체 읽기 4분 소요
                        </li>
                        
                    </ul>
                </div>
            </div>
        </a>
    </div><div class="col-md-6 post-next"><a href='/posts/docker/docker-start/'>
            <div class="author">
                <div class="author-info">다음&nbsp;페이지
                    <h2 class="post-title">Docker 시작하기</h2>
                    <ul class="cover-byline"><li><i class="fa fa-calendar" aria-hidden="true"></i>2018, May 11
                        <li><i class="fa fa-clock-o" aria-hidden="true"></i>
                        전체 읽기 4분 소요
                        </li>
                        
                    </ul>
                </div>
            </div>
        </a>
    </div></div>


            </div>
        </div>
    </div>
</div>



        <footer class="site-footer">
    <div class="container">

        <ul class="sns">

            <li>
        <a class='social-button' href='https://twitter.com/cloudzlabs' target='_blank' rel='noopener'><i class='fa fa-twitter' aria-hidden='true'></i></a>
    </li><li>
        <a class='social-button' href='https://facebook.com/cloudzlabs' target='_blank' rel='noopener'><i class='fa fa-facebook' aria-hidden='true'></i></a>
    </li><li>
        <a class='social-button' href='https://github.com/cloudzlabs' target='_blank' rel='noopener'><i class='fa fa-github' aria-hidden='true'></i></a>
    </li><li>
        <a class='social-button' href='mailto:withdtlabs@gmail.com' target='_blank' rel='noopener'>
            <i class='fa fa-envelope' aria-hidden='true'></i></a>
    </li>

            

        </ul>

        <span class='copyright'><b>
            
        

         &copy; 2018
        SK 주식회사 C&amp;C <span>Digital Labs</span> All Rights Reserved.
</span></b>


    </div>
</footer>


        <a class="scroll-to-top-btn visible" href="#">
    <i class="fa fa-arrow-up" aria-hidden="true"></i>
</a>
<script src='/assets/js/main.5871befd.js'></script>

<script type="text/javascript">
    
        var baseurl = "http:\/\/tech.cloudz-labs.io\/";
    
</script><script src='/assets/js/common.js'></script><script src='/assets/js/scripts.js'></script><script src='/assets/js/lunr.min.js'></script><script src='/assets/js/auto-complete.js'></script><script src='/assets/js/search.js'></script><script src='/assets/js/clipboard.min.js'></script><script src='/assets/js/mermaid.js'></script></body>

</html>
